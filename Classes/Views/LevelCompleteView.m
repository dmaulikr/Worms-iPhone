////  LevelCompleteView.m//  LateWorm////  Created by Susan Surapruik on 12/14/09.//  Copyright 2009 __MyCompanyName__. All rights reserved.//#import "LevelCompleteView.h"#import "LevelFlowerView.h"@implementation LevelCompleteView- (id)initWithFrame:(CGRect)frame {    if (self = [super initWithFrame:frame]) {        // Initialization code    }    return self;}- (void)drawRect:(CGRect)rect {    // Drawing code}- (void) setLevel:(unsigned)levelNum withMoves:(unsigned)moves withLeastMoves:(unsigned)leastMoves forTotalLevels:(unsigned)totalLevels levelAlreadyCompleted:(BOOL)levelAlreadyCompleted {	BOOL flowerGained = moves <= leastMoves;	BOOL moreLevels = levelNum + 1 < totalLevels;		_levelFlower._showFlower = flowerGained || (!flowerGained && levelAlreadyCompleted);	_levelFlower._showMoves = YES;	_levelFlower._firstTime = levelAlreadyCompleted && flowerGained;	[_levelFlower setLevel:levelNum withMoves:leastMoves];		UIImage *bkgImage;		if (_levelFlower._showFlower) {		_levelFlower.frame = CGRectMake(123, 160, _levelFlower.frame.size.width, _levelFlower.frame.size.height);		bkgImage = [UIImage imageNamed:@"popUp_levelSuccess"];		_tryAgainButton.hidden = YES;		if (moreLevels) {			_nextRoundButton.hidden = NO;			_nextRoundButton.frame = CGRectMake(95, 244, _nextRoundButton.frame.size.width, _nextRoundButton.frame.size.height);		} else {			_nextRoundButton.hidden = YES;		}		_gardenButton.hidden = NO;		_gardenButton.frame = CGRectMake(65, 295, _gardenButton.frame.size.width, _gardenButton.frame.size.height);		_menuButton.frame = CGRectMake(65, 346, _menuButton.frame.size.width, _menuButton.frame.size.height);		_wonText.frame = CGRectMake(0,130,320,30);		if (levelAlreadyCompleted) {			_wonText.font = [UIFont fontWithName:@"HelveticaNeueLTStd-Bd" size:18.0];			_wonText.text = @"You've already won the flower.";		} else {			_wonText.font = [UIFont fontWithName:@"HelveticaNeueLTStd-Bd" size:24.0];			_wonText.text = @"You won a flower!";		}		_movesText.text = @"";	} else {		_levelFlower.frame = CGRectMake(123, 168, _levelFlower.frame.size.width, _levelFlower.frame.size.height);		bkgImage = [UIImage imageNamed:@"popUp_levelUnsuccessful"];		_tryAgainButton.hidden = NO;		_tryAgainButton.frame = CGRectMake(23, 285, _tryAgainButton.frame.size.width, _tryAgainButton.frame.size.height);		_nextRoundButton.frame = CGRectMake(165, 285, _nextRoundButton.frame.size.width, _nextRoundButton.frame.size.height);		_gardenButton.hidden = YES;		_menuButton.frame = CGRectMake(65, 336, _menuButton.frame.size.width, _menuButton.frame.size.height);		_wonText.font = [UIFont fontWithName:@"HelveticaNeueLTStd-Bd" size:16.0];		_wonText.frame = CGRectMake(0,139,320,26);		if (moves == 1) {			_wonText.text = [NSString stringWithFormat:@"You beat the round in %d move!", moves];		} else {			_wonText.text = [NSString stringWithFormat:@"You beat the round in %d moves!", moves];		}		_movesText.font = [UIFont fontWithName:@"HelveticaNeueLTStd-Bd" size:16.0];		if (leastMoves == 1) {			_movesText.text = [NSString stringWithFormat:@"Solve it in %d move to win a flower.", leastMoves];		} else {			_movesText.text = [NSString stringWithFormat:@"Solve it in %d moves to win a flower.", leastMoves];		}	}//	[_bkg.image release];	[_bkg setImage:bkgImage];	NSLog(@"%f, %f", bkgImage.size.width, bkgImage.size.height);	_bkg.frame = CGRectMake((self.frame.size.width - bkgImage.size.width) / 2, (self.frame.size.height - bkgImage.size.height) / 2, bkgImage.size.width, bkgImage.size.height);	[self setNeedsDisplay];}@end