////  TitleViewController.m//  LateWorm////  Created by Fred Sharples on 11/30/09.//  Copyright 2009 __MyCompanyName__. All rights reserved.//#import "TitleViewController.h"#import "LateWormAppDelegate.h"#import "GameObject.h"#import "OpenALPlayer.h"@implementation TitleViewController/* // The designated initializer.  Override if you create the controller programmatically and want to perform customization that is not appropriate for viewDidLoad.- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {    if (self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil]) {        // Custom initialization    }    return self;}*/// Implement viewDidLoad to do additional setup after loading the view, typically from a nib.- (void)viewDidLoad {    [super viewDidLoad];	self.view.userInteractionEnabled = NO;	[self initializeViewAnimation];}/*// Override to allow orientations other than the default portrait orientation.- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {    // Return YES for supported orientations    return (interfaceOrientation == UIInterfaceOrientationPortrait);}*/- (void)didReceiveMemoryWarning {	// Releases the view if it doesn't have a superview.    [super didReceiveMemoryWarning];		// Release any cached data, images, etc that aren't in use.}- (void)viewDidUnload {	// Release any retained subviews of the main view.	// e.g. self.myOutlet = nil;}- (void) initializeViewAnimation {	[UIView beginAnimations:nil context:nil];	[UIView setAnimationDuration:kViewFadeTime];	[UIView setAnimationDelegate:self];	[UIView setAnimationDidStopSelector:@selector(viewVisible)];	self.view.alpha = 1.0;	[UIView commitAnimations];}- (void) viewVisible {	self.view.userInteractionEnabled = YES;		_timer = [NSTimer scheduledTimerWithTimeInterval:0.5 target:self selector:@selector(showWorm) userInfo:nil repeats:NO];}- (void)touchesEnded:(NSSet*)touches withEvent:(UIEvent*)event {	[self fadeView];}- (void) fadeView {	[self invalidateTimer];		self.view.userInteractionEnabled = NO;		[UIView beginAnimations:nil context:nil];	[UIView setAnimationDuration:kViewFadeTime];	[UIView setAnimationDelegate:self];	[UIView setAnimationDidStopSelector:@selector(removeView)];	self.view.alpha = 0.0;	[UIView commitAnimations];}- (void) removeView {	[(LateWormAppDelegate*)[[UIApplication sharedApplication] delegate] changeState:kGameState_MainMenu];}- (void) showWorm {	[self invalidateTimer];		[_worm setType:kGameWorm];	[[NSNotificationCenter defaultCenter] postNotificationName:kNOTIFICATION_PLAYSOUND object:self userInfo:@{kNOTIFICATION_PLAYSOUND: kAudioWormAppear, kNOTIFICATION_RESTART: @NO}];	_timer = [NSTimer scheduledTimerWithTimeInterval:(5.0) target:self selector:@selector(fadeView) userInfo:nil repeats:NO];}- (void) invalidateTimer {	if (_timer) {		[_timer invalidate];		_timer = nil;	}}@end